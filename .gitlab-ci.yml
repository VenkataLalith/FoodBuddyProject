stages:
  - build
  - cleanup

backend-build-job:
  stage: build
  script:
    - chmod 777 -R FoodBuddy_DevRole
    - cd FoodBuddy_DevRole/backEnd/foodBuddy
    - mvn clean install -Dmaven.test.skip=true
  tags:
    - CSCI5308Grp14

frontend-build-job:
  stage: build
  script:
    - cd FoodBuddy_DevRole/FrontEnd
    - npm install
    - npm run build
  tags:
    - CSCI5308Grp14

cleanup:
  stage: cleanup
  script:
    - sudo chown -R gitlab-runner:gitlab-runner FoodBuddy_DevRole
    - rm -rf FoodBuddy_DevRole/FrontEnd/node_modules
    - rm -rf FoodBuddy_DevRole/backEnd/foodBuddy/target
  tags:
    - CSCI5308Grp14
